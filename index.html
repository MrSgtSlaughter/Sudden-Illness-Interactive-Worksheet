<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Sudden Illness + Injury First Aid Checkup</title>
<style>
    :root {
        --bg: #f5f6fa;
        --card: #ffffff;
        --accent: #4a6cf7;
        --accent-light: rgba(74,108,247,0.1);
        --border: #d9dce8;
        --text-dark: #1a1f36;
        --text-mid: #4f556e;
        --text-light: #8a90a6;
        --radius-lg: 1rem;
        --radius-sm: .5rem;
        --shadow-card: 0 20px 40px rgba(0,0,0,0.06);
        --shadow-btn: 0 10px 20px rgba(74,108,247,0.3);
        --danger: #d72638;
        --danger-light: rgba(215,38,56,0.08);
        --good: #16a34a;
        --good-light: rgba(22,163,74,0.08);
        --warn: #f5a623;
        --warn-light: rgba(245,166,35,0.12);
        --font-stack: system-ui, -apple-system, BlinkMacSystemFont, "Inter", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    body {
        background-color: var(--bg);
        color: var(--text-dark);
        font-family: var(--font-stack);
        margin: 0;
        padding: 2rem;
        line-height: 1.45;
    }

    header {
        max-width: 1100px;
        margin: 0 auto 1.5rem auto;
        display: grid;
        gap: 1rem;
    }

    .top-row {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        align-items: flex-start;
        justify-content: space-between;
    }

    h1 {
        margin: 0;
        font-size: clamp(1.4rem, 1vw + 1rem, 1.6rem);
        font-weight: 600;
        color: var(--text-dark);
        display: flex;
        align-items: center;
        gap: .5rem;
    }

    .badge {
        font-size: .75rem;
        background: var(--accent-light);
        color: var(--accent);
        padding: .25rem .5rem;
        border-radius: var(--radius-sm);
        font-weight: 500;
        border: 1px solid var(--accent);
        line-height: 1.2;
    }

    .desc {
        font-size: .9rem;
        color: var(--text-mid);
        max-width: 70ch;
    }

    .timer-hint {
        font-size: .8rem;
        color: var(--text-light);
    }

    /* layout grid */
    .layout {
        max-width: 1100px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    @media(min-width: 900px){
        .layout {
            grid-template-columns: 2fr 1fr;
        }
    }

    /* cards */
    .card {
        background: var(--card);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-card);
        border: 1px solid var(--border);
        padding: 1.25rem 1.25rem 1rem;
    }

    .card:not(:last-child){
        margin-bottom: 1rem;
    }

    .card-header-row {
        display: flex;
        flex-wrap: wrap;
        gap: .5rem 1rem;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 1rem;
    }

    .card h2 {
        font-size: 1rem;
        font-weight: 600;
        margin: 0;
        display: flex;
        align-items: center;
        gap: .5rem;
        color: var(--text-dark);
    }

    .pill {
        font-size: .7rem;
        line-height: 1.2;
        font-weight: 500;
        border-radius: 999px;
        padding: .25rem .5rem;
        border: 1px solid transparent;
        white-space: nowrap;
        display: inline-block;
    }

    .pill-emergency {
        background: var(--danger-light);
        color: var(--danger);
        border-color: var(--danger);
    }
    .pill-assess {
        background: var(--warn-light);
        color: var(--warn);
        border-color: var(--warn);
    }
    .pill-care {
        background: var(--good-light);
        color: var(--good);
        border-color: var(--good);
    }

    .small-note {
        color: var(--text-light);
        font-size: .75rem;
        line-height: 1.3;
        max-width: 60ch;
    }

    /* form sections */
    fieldset{
        border: 0;
        padding: 0;
        margin: 0 0 1rem 0;
    }
    legend{
        font-size:.9rem;
        font-weight:600;
        margin-bottom:.5rem;
        color: var(--text-dark);
    }
    label{
        font-size:.85rem;
        color: var(--text-mid);
        display:block;
        margin-bottom:.25rem;
        font-weight:500;
    }
    input[type="text"],
    input[type="email"],
    select,
    textarea {
        width:100%;
        font-size: .9rem;
        font-family: inherit;
        border-radius: var(--radius-sm);
        border:1px solid var(--border);
        background:#fff;
        padding:.6rem .7rem;
        color:var(--text-dark);
        box-sizing:border-box;
    }
    input[type="text"]:focus,
    input[type="email"]:focus,
    select:focus,
    textarea:focus{
        outline:2px solid var(--accent);
        border-color:var(--accent);
    }
    textarea{
        min-height:4rem;
        resize:vertical;
    }

    .question-block{
        margin-bottom:1rem;
        border:1px solid var(--border);
        border-radius:var(--radius-sm);
        padding: .75rem .75rem .5rem;
        background: #fff;
    }
    .q-text{
        font-size:.9rem;
        font-weight:600;
        color:var(--text-dark);
        margin-bottom:.5rem;
    }
    .q-options label{
        font-weight:400;
        display:flex;
        align-items:flex-start;
        gap:.5rem;
        cursor:pointer;
        color:var(--text-mid);
        line-height:1.4;
        padding:.4rem .5rem;
        border-radius:var(--radius-sm);
    }
    .q-options label:hover{
        background: var(--accent-light);
        color: var(--text-dark);
    }
    .q-options input{
        margin-top:.2rem;
    }

    /* matching grid */
    .match-grid{
        width:100%;
        border-collapse:collapse;
        font-size:.85rem;
    }
    .match-grid th{
        text-align:left;
        font-weight:600;
        color:var(--text-dark);
        border-bottom:2px solid var(--border);
        padding:.5rem;
        font-size:.8rem;
    }
    .match-grid td{
        vertical-align:top;
        border-bottom:1px solid var(--border);
        padding:.5rem;
        color:var(--text-mid);
    }
    .match-select{
        max-width: 200px;
    }

    /* buttons */
    .btn-row{
        display:flex;
        flex-wrap:wrap;
        gap:.75rem;
        margin-top:1rem;
    }
    button{
        cursor:pointer;
        border:0;
        border-radius:var(--radius-sm);
        font-size:.85rem;
        font-weight:600;
        line-height:1.2;
        padding:.7rem .9rem;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        gap:.5rem;
        box-shadow: var(--shadow-card);
        transition: box-shadow .12s, transform .12s;
        background: var(--accent);
        color:#fff;
    }
    button.small-btn{
        font-size:.8rem;
        padding:.55rem .7rem;
        line-height:1.2;
    }
    button:hover{
        box-shadow: var(--shadow-btn);
        transform:translateY(-1px);
    }
    button:active{
        transform:translateY(0);
        box-shadow: var(--shadow-card);
    }
    button.alt{
        background:#fff;
        border:1px solid var(--border);
        color:var(--text-dark);
        box-shadow:none;
    }
    button.alt:hover{
        box-shadow: var(--shadow-card);
    }

    .status-area{
        font-size:.8rem;
        line-height:1.4;
        color:var(--text-mid);
        background:#fff;
        border:1px solid var(--border);
        border-radius:var(--radius-sm);
        padding:.6rem .75rem;
        white-space:pre-wrap;
        word-break:break-word;
        max-height:8rem;
        overflow:auto;
    }

    /* footer / legal */
    footer{
        max-width:1100px;
        margin:2rem auto 0;
        font-size:.7rem;
        color:var(--text-light);
        line-height:1.4;
    }
    .danger-callout{
        background:var(--danger-light);
        color:var(--danger);
        border:1px solid var(--danger);
        font-size:.75rem;
        padding:.5rem .75rem;
        border-radius:var(--radius-sm);
        font-weight:500;
        margin-top:.5rem;
        line-height:1.35;
    }

    /* score display */
    .score-box{
        background:var(--good-light);
        border:1px solid var(--good);
        color:var(--text-dark);
        font-size:.8rem;
        border-radius:var(--radius-sm);
        padding:.5rem .75rem;
        line-height:1.4;
        font-weight:500;
        display:none;
        white-space:pre-wrap;
    }

</style>
</head>
<body>

<header>
    <div class="top-row">
        <h1>
            🆘 First Aid Checkup: Sudden Illness & Injury
            <span class="badge">Grade 7 • ~30 min</span>
        </h1>
        <div class="timer-hint">Be real. This is about keeping people alive, not trick questions.</div>
    </div>
    <div class="desc">
        You’re first on the scene for common emergencies: stroke, seizure, allergic reaction,
        serious bleeding, burns, broken bones, sprains. Your job is:
        <strong>Check → Call → Care</strong>.
        That’s straight out of American Red Cross first aid playbooks:
        1) make sure the scene is safe,
        2) call 9-1-1 if it’s life threatening (can’t breathe, heavy bleeding, stroke signs, etc.),
        3) stay with them, keep airway open, control bleeding, cool burns with clean/cool water,
        support injured bones/joints, and reassure them while help comes. :contentReference[oaicite:3]{index=3}
    </div>
</header>

<main class="layout">

    <!-- LEFT COLUMN: FORM / QUESTIONS -->
    <section>
        <!-- Student Info -->
        <form id="illnessForm">

            <div class="card">
                <div class="card-header-row">
                    <h2>
                        👤 Student Info
                        <span class="pill pill-assess">Identify yourself</span>
                    </h2>
                    <div class="small-note">
                        Fill this out or you don't get credit.
                    </div>
                </div>

                <fieldset>
                    <legend>Who are you?</legend>
                    <label for="firstName">First Name</label>
                    <input id="firstName" name="firstName" type="text" placeholder="First Name" required />

                    <label for="lastName" style="margin-top:.75rem;">Last Name</label>
                    <input id="lastName" name="lastName" type="text" placeholder="Last Name" required />

                    <label for="studentEmail" style="margin-top:.75rem;">School Email</label>
                    <input id="studentEmail" name="studentEmail" type="email" placeholder="you@pccsk12.com" required />
                </fieldset>

                <div class="danger-callout">
                    ⚠ Do NOT fake someone else's name/email. That’s a school issue.
                </div>
            </div>

            <!-- Section A: Quick Check Knowledge / Matching (Sudden Illness) -->
            <div class="card">
                <div class="card-header-row">
                    <h2>
                        🧠 Section A: Match the Illness to the Sign
                        <span class="pill pill-assess">Know what you're seeing</span>
                    </h2>
                    <div class="small-note">
                        Pick the BEST match for each situation.
                    </div>
                </div>

                <table class="match-grid">
                    <thead>
                        <tr>
                            <th style="width:55%;">What you're seeing</th>
                            <th style="width:45%;">This is most likely...</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                1. Person’s face droops on one side, slurred speech, can’t lift one arm.
                                (F.A.S.T.: Face, Arm, Speech, Time to call 9-1-1.)
                            </td>
                            <td>
                                <select class="match-select" name="match1" id="match1">
                                    <option value="">-- choose --</option>
                                    <option>Stroke</option>
                                    <option>Diabetic Emergency (Low Blood Sugar)</option>
                                    <option>Seizure</option>
                                    <option>Severe Allergic Reaction / Anaphylaxis</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                2. Person is confused, shaky, sweaty, saying “I feel weird,” and hasn’t eaten.
                            </td>
                            <td>
                                <select class="match-select" name="match2" id="match2">
                                    <option value="">-- choose --</option>
                                    <option>Stroke</option>
                                    <option>Diabetic Emergency (Low Blood Sugar)</option>
                                    <option>Seizure</option>
                                    <option>Poisoning</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                3. Person collapses and their muscles jerk hard and fast.
                                You cannot wake them.
                            </td>
                            <td>
                                <select class="match-select" name="match3" id="match3">
                                    <option value="">-- choose --</option>
                                    <option>Stroke</option>
                                    <option>Seizure</option>
                                    <option>Heat Cramps</option>
                                    <option>Asthma Attack</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                4. Person was just stung, and now their lips are swelling,
                                throat feels tight, and they’re struggling to breathe.
                            </td>
                            <td>
                                <select class="match-select" name="match4" id="match4">
                                    <option value="">-- choose --</option>
                                    <option>Minor Allergic Reaction</option>
                                    <option>Severe Allergic Reaction / Anaphylaxis</option>
                                    <option>Upset Stomach</option>
                                    <option>Muscle Strain</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>

            <!-- Section B: Scenario Decisions (Sudden Illness) -->
            <div class="card">
                <div class="card-header-row">
                    <h2>
                        🚑 Section B: Sudden Illness Scenarios
                        <span class="pill pill-emergency">What do you do first?</span>
                    </h2>
                    <div class="small-note">
                        Click the BEST answer.
                    </div>
                </div>

                <!-- B1 -->
                <div class="question-block">
                    <div class="q-text">
                        B1. In class, a student tries to talk but it sounds like “mmrrf,” face is drooping.
                        First move?
                    </div>
                    <div class="q-options">
                        <label>
                            <input type="radio" name="b1" value="A">
                            A. Tell them to walk it off for 30 minutes.
                        </label>
                        <label>
                            <input type="radio" name="b1" value="B">
                            B. Film them for social.
                        </label>
                        <label>
                            <input type="radio" name="b1" value="C">
                            C. Get an adult / call 9-1-1 immediately. Stroke signs.
                        </label>
                        <label>
                            <input type="radio" name="b1" value="D">
                            D. Give them water and tell them to sleep.
                        </label>
                    </div>
                </div>

                <!-- B2 -->
                <div class="question-block">
                    <div class="q-text">
                        B2. Lunch. Your friend with diabetes didn’t eat breakfast. Now they’re pale,
                        sweating, and acting confused, but awake. Best move?
                    </div>
                    <div class="q-options">
                        <label>
                            <input type="radio" name="b2" value="A">
                            A. Give sugar (juice, glucose if they have it) and get an adult.
                        </label>
                        <label>
                            <input type="radio" name="b2" value="B">
                            B. Force them to run laps.
                        </label>
                        <label>
                            <input type="radio" name="b2" value="C">
                            C. Tell them “mind over matter.”
                        </label>
                        <label>
                            <input type="radio" name="b2" value="D">
                            D. Try to make them throw up.
                        </label>
                    </div>
                </div>

                <!-- B3 -->
                <div class="question-block">
                    <div class="q-text">
                        B3. Someone collapses and starts having a seizure. What’s correct?
                    </div>
                    <div class="q-options">
                        <label>
                            <input type="radio" name="b3" value="A">
                            A. Hold them down so they stop moving.
                        </label>
                        <label>
                            <input type="radio" name="b3" value="B">
                            B. Put something in their mouth.
                        </label>
                        <label>
                            <input type="radio" name="b3" value="C">
                            C. Clear space so they don’t smash into desks, call 9-1-1,
                            after shaking stops roll them on their side to help breathing.
                        </label>
                        <label>
                            <input type="radio" name="b3" value="D">
                            D. Throw water on them.
                        </label>
                    </div>
                </div>

                <!-- B4 -->
                <div class="question-block">
                    <div class="q-text">
                        B4. Classmate ate peanuts and now says “I...can’t...breathe.”
                        Lips swelling. They point at their EpiPen.
                    </div>
                    <div class="q-options">
                        <label>
                            <input type="radio" name="b4" value="A">
                            A. Get the auto-injector, help them use it in the outer thigh, call 9-1-1.
                        </label>
                        <label>
                            <input type="radio" name="b4" value="B">
                            B. Tell them to breathe slower.
                        </label>
                        <label>
                            <input type="radio" name="b4" value="C">
                            C. Give them milk.
                        </label>
                        <label>
                            <input type="radio" name="b4" value="D">
                            D. Ask people to film.
                        </label>
                    </div>
                </div>

                <!-- B5 -->
                <div class="question-block">
                    <div class="q-text">
                        B5. A kid inhaled a strong chemical in science lab. They’re coughing nonstop
                        and dizzy. What matters most right now?
                    </div>
                    <div class="q-options">
                        <label>
                            <input type="radio" name="b5" value="A">
                            A. Get them to fresh air / away from the poison if it’s safe for you,
                            tell an adult / call 9-1-1.
                        </label>
                        <label>
                            <input type="radio" name="b5" value="B">
                            B. Keep them in the chemical room and say “walk it off.”
                        </label>
                        <label>
                            <input type="radio" name="b5" value="C">
                            C. Taste the chemical yourself.
                        </label>
                        <label>
                            <input type="radio" name="b5" value="D">
                            D. Ignore it.
                        </label>
                    </div>
                </div>

            </div>

            <!-- Section D: Injury Scenarios (Wounds, Burns, Fractures/Sprains/Strains) -->
            <div class="card">
                <div class="card-header-row">
                    <h2>
                        🩹 Section D: Injury Scenarios
                        <span class="pill pill-emergency">Bleeding / Burns / Bones</span>
                    </h2>
                    <div class="small-note">
                        Red Cross style responses: direct pressure for serious bleeding, cool water for burns,
                        rest and support for injured bones/joints. :contentReference[oaicite:4]{index=4}
                    </div>
                </div>

                <!-- D1 -->
                <div class="question-block">
                    <div class="q-text">
                        D1. Someone cuts their forearm on metal. Blood is flowing fast and soaking
                        through a paper towel. What’s your move?
                    </div>
                    <div class="q-options">
                        <label>
                            <input type="radio" name="d1" value="A">
                            A. Put on gloves if you have them, press firmly with a clean cloth or dressing
                            and keep pressure. Tell someone to call 9-1-1.
                        </label>
                        <label>
                            <input type="radio" name="d1" value="B">
                            B. Take the bloody cloth off to “check it” every few seconds.
                        </label>
                        <label>
                            <input type="radio" name="d1" value="C">
                            C. Tell them to keep their arm down and shake it.
                        </label>
                        <label>
                            <input type="radio" name="d1" value="D">
                            D. Post it on Snap first.
                        </label>
                    </div>
                </div>

                <!-- D2 -->
                <div class="question-block">
                    <div class="q-text">
                        D2. A classmate touched a hot pan in FACS/foods class. Their palm is red,
                        painful, not charred. What’s correct first aid?
                    </div>
                    <div class="q-options">
                        <label>
                            <input type="radio" name="d2" value="A">
                            A. Put butter on it.
                        </label>
                        <label>
                            <input type="radio" name="d2" value="B">
                            B. Cool the burn with clean, cool (not ice) running water ~15–20 min,
                            then loosely cover if needed.
                        </label>
                        <label>
                            <input type="radio" name="d2" value="C">
                            C. Put ice directly on it.
                        </label>
                        <label>
                            <input type="radio" name="d2" value="D">
                            D. Pop any blisters right away.
                        </label>
                    </div>
                </div>

                <!-- D3 -->
                <div class="question-block">
                    <div class="q-text">
                        D3. Your friend rolls their ankle in gym. It’s swelling, they can’t put weight
                        on it, and it might be a sprain or even a fracture. What’s best?
                    </div>
                    <div class="q-options">
                        <label>
                            <input type="radio" name="d3" value="A">
                            A. Force them to jog it off.
                        </label>
                        <label>
                            <input type="radio" name="d3" value="B">
                            B. Twist it around to “see if it’s broken.”
                        </label>
                        <label>
                            <input type="radio" name="d3" value="C">
                            C. Have them stop moving, keep the ankle supported in the position you
                            found it, lightly cool it (cloth between skin and ice) about 20 min,
                            and get an adult / medical help.
                        </label>
                        <label>
                            <input type="radio" name="d3" value="D">
                            D. Slam it into place like a YouTube clip.
                        </label>
                    </div>
                </div>
            </div>

            <!-- Section C: Short Answer / Reflection -->
            <div class="card">
                <div class="card-header-row">
                    <h2>
                        💬 Section E: In Your Words
                        <span class="pill pill-care">Stay with the person</span>
                    </h2>
                    <div class="small-note">
                        Answer in 1-2 sentences. Straight to the point.
                    </div>
                </div>

                <fieldset>
                    <legend>E1. Why do you NOT give a seizing person water or put stuff in their mouth?</legend>
                    <textarea id="c1" name="c1"
                        placeholder="Type your answer..."></textarea>
                </fieldset>

                <fieldset>
                    <legend>E2. Someone might be embarrassed or scared during a medical emergency. What do you
                        SAY to keep them calm while help is coming?</legend>
                    <textarea id="c2" name="c2"
                        placeholder="Type what you'd actually say..."></textarea>
                </fieldset>

                <fieldset>
                    <legend>E3. List ONE clue that tells you it’s time to call 9-1-1 immediately.</legend>
                    <textarea id="c3" name="c3"
                        placeholder="Example: 'They have trouble breathing...' etc."></textarea>
                </fieldset>

                <fieldset>
                    <legend>E4. Big wound, blood is pouring out. What’s the #1 thing you do with your hands right now?</legend>
                    <textarea id="c4" name="c4"
                        placeholder="Be specific."></textarea>
                </fieldset>
            </div>

            <!-- buttons inside form -->
            <div class="btn-row">
                <button type="button" id="saveBtn" class="small-btn" title="Saves to this browser only.">
                    💾 Save Progress
                </button>

                <button type="button" id="loadBtn" class="small-btn" title="Loads from this browser only.">
                    📂 Load Saved
                </button>

                <button type="button" id="scoreBtn" class="small-btn">
                    ✅ Check My Score (All Sections)
                </button>
            </div>

            <div id="scoreBox" class="score-box" style="margin-top:1rem;"></div>

        </form>
    </section>


    <!-- RIGHT COLUMN: SUBMIT / STATUS / QUICK REF -->
    <aside>

        <!-- Quick Reference -->
        <div class="card">
            <div class="card-header-row">
                <h2>
                    📋 Quick Lifesaver Rules
                    <span class="pill pill-emergency">Red Cross style</span>
                </h2>
            </div>
            <div class="small-note">
                1. <strong>Check</strong>: Is the scene safe for YOU? Don’t become victim #2.
                Gloves/barrier if you have them. :contentReference[oaicite:5]{index=5}
                <br><br>

                2. <strong>Call</strong>: Call 9-1-1 fast if they:
                can’t breathe, are unconscious, have stroke signs (face drooping / slurred speech),
                have severe allergic reaction with trouble breathing,
                are bleeding a lot,
                or you think there’s a serious break/neck/back injury. :contentReference[oaicite:6]{index=6}
                <br><br>

                3. <strong>Care</strong>:
                - Seizure: move stuff away, let it happen, roll on side after.  
                - Diabetic low sugar & awake: give sugar.  
                - Severe allergy: use their EpiPen in outer thigh, then 9-1-1. :contentReference[oaicite:7]{index=7}  
                - Bleeding: direct pressure with something clean. Keep pressure. Don’t peel it off if it soaks. Watch for shock (pale, weak, dizzy). :contentReference[oaicite:8]{index=8}  
                - Burns: cool with clean, cool running water ~15–20 min. Never ice or butter. Loosely cover. Keep watching them. :contentReference[oaicite:9]{index=9}  
                - Suspected sprain/strain/fracture: stop activity, support it how you found it, cool up to ~20 min with cloth between skin and ice, elevate if it doesn’t hurt, and get adult/medical help. :contentReference[oaicite:10]{index=10}
            </div>
        </div>

        <!-- Send / Teacher -->
        <div class="card">
            <div class="card-header-row">
                <h2>
                    📨 Turn In Your Work
                    <span class="pill pill-assess">Email Mr. Slaughter</span>
                </h2>
            </div>

            <div class="small-note" style="margin-bottom:.75rem;">
                This builds an email to <strong>jason.slaughter@pccsk12.com</strong>
                with your answers. You still have to hit Send in Gmail.
            </div>

            <div class="btn-row">
                <button type="button" id="emailBtn">
                    ✉ Generate Email
                </button>
            </div>

            <div class="small-note" style="margin-top:1rem;">
                If Gmail doesn't open, copy/paste the summary below into an email to
                <strong>jason.slaughter@pccsk12.com</strong> with subject “First Aid Checkup”.
            </div>

            <div id="statusArea" class="status-area" style="margin-top:.75rem;">
                (Your answer summary will appear here.)
            </div>

        </div>

        <!-- Privacy note -->
        <div class="card">
            <div class="card-header-row">
                <h2>
                    🔐 Save / Privacy
                    <span class="pill pill-care">Local only</span>
                </h2>
            </div>
            <div class="small-note">
                “Save Progress” stores your answers in <strong>this browser only</strong> using
                localStorage. It does NOT send anything to the internet.
                If you clear your browser data, it's gone.
            </div>
        </div>

    </aside>
</main>

<footer>
    This activity is classroom first aid education. You are not a doctor. If someone is in
    danger in real life: <strong>get an adult and/or call 9-1-1 immediately.</strong><br><br>

    Sudden illness:  
    - Stroke: F.A.S.T. (Face drooping, Arm weakness, Speech trouble, Time to call 9-1-1).  
    - Seizure: protect head, clear space, recovery position on side after, call 9-1-1 if it lasts > a few minutes or first known seizure.  
    - Diabetic low blood sugar & awake: give sugar.  
    - Severe allergy with breathing trouble: EpiPen to outer thigh, call 9-1-1. :contentReference[oaicite:11]{index=11}
    <br><br>

    Injuries:  
    - Major bleeding: direct pressure with clean dressing, keep pressure, don't peel off soaked pads, watch for shock. :contentReference[oaicite:12]{index=12}  
    - Burns: cool with clean, cool running water ~15–20 minutes, never ice, loosely cover. :contentReference[oaicite:13]{index=13}  
    - Sprain/strain/fracture: stop activity, support/immobilize in position found, cool up to ~20 min with cloth between skin and ice, elevate if it doesn't cause pain, get medical help if serious or can’t bear weight. :contentReference[oaicite:14]{index=14}
</footer>

<script>
(function(){

    // ============
    // UTIL
    // ============
    function getVal(name){
        const f = document.getElementById('illnessForm');
        const el = f.querySelector('[name="'+name+'"]');
        if(!el){return "";}
        if(el.type === 'radio'){
            const checked = f.querySelector('input[name="'+name+'"]:checked');
            return checked ? checked.value : "";
        }
        return el.value || "";
    }

    function getAllVals(){
        const data = {
            firstName: document.getElementById('firstName').value.trim(),
            lastName: document.getElementById('lastName').value.trim(),
            studentEmail: document.getElementById('studentEmail').value.trim(),

            match1: document.getElementById('match1').value,
            match2: document.getElementById('match2').value,
            match3: document.getElementById('match3').value,
            match4: document.getElementById('match4').value,

            b1: getVal('b1'),
            b2: getVal('b2'),
            b3: getVal('b3'),
            b4: getVal('b4'),
            b5: getVal('b5'),

            d1: getVal('d1'),
            d2: getVal('d2'),
            d3: getVal('d3'),

            c1: document.getElementById('c1').value.trim(),
            c2: document.getElementById('c2').value.trim(),
            c3: document.getElementById('c3').value.trim(),
            c4: document.getElementById('c4').value.trim()
        };
        return data;
    }

    function setAllVals(data){
        if(!data) return;
        if(data.firstName !== undefined) document.getElementById('firstName').value = data.firstName;
        if(data.lastName !== undefined) document.getElementById('lastName').value = data.lastName;
        if(data.studentEmail !== undefined) document.getElementById('studentEmail').value = data.studentEmail;

        if(data.match1 !== undefined) document.getElementById('match1').value = data.match1;
        if(data.match2 !== undefined) document.getElementById('match2').value = data.match2;
        if(data.match3 !== undefined) document.getElementById('match3').value = data.match3;
        if(data.match4 !== undefined) document.getElementById('match4').value = data.match4;

        if(data.b1 !== undefined){
            const el = document.querySelector('input[name="b1"][value="'+data.b1+'"]');
            if(el) el.checked = true;
        }
        if(data.b2 !== undefined){
            const el = document.querySelector('input[name="b2"][value="'+data.b2+'"]');
            if(el) el.checked = true;
        }
        if(data.b3 !== undefined){
            const el = document.querySelector('input[name="b3"][value="'+data.b3+'"]');
            if(el) el.checked = true;
        }
        if(data.b4 !== undefined){
            const el = document.querySelector('input[name="b4"][value="'+data.b4+'"]');
            if(el) el.checked = true;
        }
        if(data.b5 !== undefined){
            const el = document.querySelector('input[name="b5"][value="'+data.b5+'"]');
            if(el) el.checked = true;
        }

        if(data.d1 !== undefined){
            const el = document.querySelector('input[name="d1"][value="'+data.d1+'"]');
            if(el) el.checked = true;
        }
        if(data.d2 !== undefined){
            const el = document.querySelector('input[name="d2"][value="'+data.d2+'"]');
            if(el) el.checked = true;
        }
        if(data.d3 !== undefined){
            const el = document.querySelector('input[name="d3"][value="'+data.d3+'"]');
            if(el) el.checked = true;
        }

        if(data.c1 !== undefined) document.getElementById('c1').value = data.c1;
        if(data.c2 !== undefined) document.getElementById('c2').value = data.c2;
        if(data.c3 !== undefined) document.getElementById('c3').value = data.c3;
        if(data.c4 !== undefined) document.getElementById('c4').value = data.c4;
    }

    // ============
    // SAVE / LOAD
    // ============
    const SAVE_KEY = "firstAidWorksheet_v2";

    function saveProgress(){
        try{
            const data = getAllVals();
            localStorage.setItem(SAVE_KEY, JSON.stringify(data));
            showStatus("Saved locally ✅ (If you clear browser data, it's gone.)");
        }catch(err){
            console.error(err);
            showStatus("Save failed ❌ Your browser might be blocking localStorage.");
        }
    }

    function loadProgress(){
        try{
            const raw = localStorage.getItem(SAVE_KEY);
            if(!raw){
                showStatus("No saved data found.");
                return;
            }
            const data = JSON.parse(raw);
            setAllVals(data);
            showStatus("Loaded saved work ✅");
        }catch(err){
            console.error(err);
            showStatus("Load failed ❌");
        }
    }

    // ============
    // SHORT ANSWER GRADING (gentle)
    // ============
    /*
        E1 (c1): seizure / mouth / water
          Look for: "choke", "choking", "block airway", "airway", "can't swallow", "can't control muscles",
          "aspirate", "inhale it". We give hint if they're missing the choking/airway idea.

        E2 (c2): calming talk
          Look for: "I'm here", "help is coming", "you're ok", "not leaving", "stay with you".
          Hint: tell them you're staying and help is coming.

        E3 (c3): when to call 9-1-1
          Look for: "can't breathe", "not breathing", "unconscious", "won't wake up",
          "face drooping / slurred speech / stroke", "severe allergic reaction", "seizure lasting long".
          Hint: life-threatening stuff like can't breathe, won't wake up, stroke signs.

        E4 (c4): heavy bleeding
          Look for: "direct pressure", "press hard", "apply pressure", "hold pressure", "pressure with clean cloth",
          "gloves" are bonus, "call 9-1-1" okay but not enough alone.
          Hint: You use something clean and PRESS to control bleeding (don't pull it off if it soaks).
    */
    function gradeShortAnswers(data){
        const results = {};

        function norm(t){
            return (t || "").toLowerCase();
        }

        // --- E1 / c1 ---
        const c1 = norm(data.c1);
        let c1correct = false;
        let c1why = "";
        if(
            c1.includes("choke") ||
            c1.includes("choking") ||
            (c1.includes("block") && c1.includes("air")) ||
            c1.includes("airway") ||
            c1.includes("can't swallow") ||
            c1.includes("cannot swallow") ||
            (c1.includes("can't control") && c1.includes("muscle")) ||
            c1.includes("aspirat") || // aspirate
            c1.includes("inhale it")
        ){
            c1correct = true;
            c1why = "Good. You said they could choke / can't safely swallow during a seizure.";
        } else if (
            c1.includes("don't put anything in their mouth") ||
            c1.includes("nothing in their mouth")
        ){
            c1correct = false;
            c1why = "Almost there. Add that it's dangerous because they can't swallow and could choke.";
        } else {
            c1correct = false;
            c1why = "Hint: During a seizure they can't control swallowing, so liquid/objects can block their airway and choke them.";
        }
        results.c1 = {correct: c1correct, feedback: c1why};

        // --- E2 / c2 ---
        const c2 = norm(data.c2);
        let c2correct = false;
        let c2why = "";
        if(
            c2.includes("i'm here") ||
            c2.includes("im here") ||
            c2.includes("i am here") ||
            c2.includes("stay with you") ||
            c2.includes("help is coming") ||
            c2.includes("you're okay") ||
            c2.includes("youre okay") ||
            c2.includes("not leaving") ||
            c2.includes("i won't leave") ||
            c2.includes("i will stay") ||
            (c2.includes("stay calm") && c2.includes("help"))
        ){
            c2correct = true;
            c2why = "Nice. You're keeping them calm and telling them you’ll stay / help is coming.";
        } else {
            c2correct = false;
            c2why = "Hint: Say something like 'I'm here with you. Help is on the way. You're not alone.'";
        }
        results.c2 = {correct: c2correct, feedback: c2why};

        // --- E3 / c3 ---
        const c3 = norm(data.c3);
        let c3correct = false;
        let c3why = "";
        if(
            c3.includes("can't breathe") ||
            c3.includes("cant breathe") ||
            c3.includes("not breathing") ||
            c3.includes("can't breathe right") ||
            c3.includes("cant breathe right") ||
            c3.includes("unconscious") ||
            c3.includes("won't wake up") ||
            c3.includes("wont wake up") ||
            c3.includes("passed out") ||
            c3.includes("face droop") ||
            c3.includes("face is drooping") ||
            c3.includes("slurred speech") ||
            c3.includes("stroke") ||
            c3.includes("throat swelling") ||
            (c3.includes("allergic") && c3.includes("breath")) ||
            (c3.includes("seizure") && (c3.includes("minutes") || c3.includes("long")))
        ){
            c3correct = true;
            c3why = "Yes. That's a life-threatening clue that means call 9-1-1 immediately.";
        } else {
            c3correct = false;
            c3why = "Hint: Call 9-1-1 if they can't breathe, won't wake up, show stroke signs, or severe allergic reaction.";
        }
        results.c3 = {correct: c3correct, feedback: c3why};

        // --- E4 / c4 ---
        const c4 = norm(data.c4);
        let c4correct = false;
        let c4why = "";
        if(
            c4.includes("direct pressure") ||
            (c4.includes("apply") && c4.includes("pressure")) ||
            (c4.includes("hold") && c4.includes("pressure")) ||
            (c4.includes("press") && c4.includes("cloth")) ||
            (c4.includes("press") && c4.includes("clean")) ||
            (c4.includes("press") && c4.includes("gauze")) ||
            (c4.includes("press") && c4.includes("dressing"))
        ){
            c4correct = true;
            c4why = "Exactly. Use clean dressing/gloves if you can and press hard to control bleeding.";
        } else if(
            c4.includes("call 9-1-1") ||
            c4.includes("call 911")
        ){
            c4correct = false;
            c4why = "Calling 9-1-1 is right, but first you must put direct pressure on the wound with something clean to slow the bleeding.";
        } else {
            c4correct = false;
            c4why = "Hint: You grab something clean and press directly on the wound. Keep pressure; don't peel it up if it soaks.";
        }
        results.c4 = {correct: c4correct, feedback: c4why};

        return results;
    }

    // ============
    // SCORING (A+B+D objective + E short answer w/feedback)
    // ============
    /*
        Objective answer key:

        match1: Stroke
        match2: Diabetic Emergency (Low Blood Sugar)
        match3: Seizure
        match4: Severe Allergic Reaction / Anaphylaxis

        b1: C
        b2: A
        b3: C
        b4: A
        b5: A

        d1: A  (direct pressure + 9-1-1)
        d2: B  (cool burn with clean cool water ~15-20 min, no ice/butter, then loose cover)
        d3: C  (stop, support, cool ~20 min with cloth, get adult/medical)
    */
    function gradeWork(){
        const data = getAllVals();
        let score = 0;
        let total = 0;

        // matching
        const matchKey = {
            match1: "Stroke",
            match2: "Diabetic Emergency (Low Blood Sugar)",
            match3: "Seizure",
            match4: "Severe Allergic Reaction / Anaphylaxis"
        };
        ["match1","match2","match3","match4"].forEach(q=>{
            total++;
            if((data[q]||"").trim() === matchKey[q]) score++;
        });

        // sudden illness MC (B)
        const mcKey = {
            b1:"C",
            b2:"A",
            b3:"C",
            b4:"A",
            b5:"A"
        };
        ["b1","b2","b3","b4","b5"].forEach(q=>{
            total++;
            if((data[q]||"").trim() === mcKey[q]) score++;
        });

        // injury MC (D)
        const injKey = {
            d1:"A",
            d2:"B",
            d3:"C"
        };
        ["d1","d2","d3"].forEach(q=>{
            total++;
            if((data[q]||"").trim() === injKey[q]) score++;
        });

        const percent = total>0 ? Math.round((score/total)*100) : 0;

        // short answers grading
        const shortFeedback = gradeShortAnswers(data);

        // gentle "credit"
        // full credit if correct OR "Almost there"
        let shortScore = 0;
        let shortTotal = 4;

        if(shortFeedback.c1.correct || shortFeedback.c1.feedback.startsWith("Almost")) shortScore++;
        if(shortFeedback.c2.correct || shortFeedback.c2.feedback.startsWith("Almost")) shortScore++;
        if(shortFeedback.c3.correct || shortFeedback.c3.feedback.startsWith("Almost")) shortScore++;
        if(shortFeedback.c4.correct || shortFeedback.c4.feedback.startsWith("Almost")) shortScore++;

        const box = document.getElementById('scoreBox');
        box.style.display = "block";
        box.textContent =
`Auto-check results:

Sections A, B & D (matching + multiple choice):
• ${score} / ${total} correct (${percent}%)

Section E (short answers):
E1: ${shortFeedback.c1.correct ? "✓" : "↺"} ${shortFeedback.c1.feedback}
E2: ${shortFeedback.c2.correct ? "✓" : "↺"} ${shortFeedback.c2.feedback}
E3: ${shortFeedback.c3.correct ? "✓" : "↺"} ${shortFeedback.c3.feedback}
E4: ${shortFeedback.c4.correct ? "✓" : "↺"} ${shortFeedback.c4.feedback}

Short answer credit so far: ${shortScore} / ${shortTotal}
If you see a "Hint", fix your answer above and hit Check My Score again to bump your credit.

Reminder: Your goal is to keep somebody alive until real medical help arrives.`;

        showStatus("Score checked. Scroll to see feedback ✅");
    }

    // ============
    // EMAIL BUILDER
    // ============
    function buildEmailBody(data){
        let body =
`Student: ${data.firstName} ${data.lastName}
Email: ${data.studentEmail}

SECTION A (Match - Sudden Illness):
1: ${data.match1}
2: ${data.match2}
3: ${data.match3}
4: ${data.match4}

SECTION B (Sudden Illness Scenarios MC):
B1: ${data.b1}
B2: ${data.b2}
B3: ${data.b3}
B4: ${data.b4}
B5: ${data.b5}

SECTION D (Injury Scenarios MC):
D1: ${data.d1}
D2: ${data.d2}
D3: ${data.d3}

SECTION E (Short Answer):
E1: ${data.c1}
E2: ${data.c2}
E3: ${data.c3}
E4: ${data.c4}

I confirm this is my own work.`;

        return body;
    }

    function showStatus(msg){
        const box = document.getElementById('statusArea');
        box.textContent = msg;
    }

    function generateEmail(){
        const data = getAllVals();

        // basic validation
        if(!data.firstName || !data.lastName || !data.studentEmail){
            showStatus("❌ You must fill First Name, Last Name, and School Email first.");
            return;
        }

        const subject = encodeURIComponent("First Aid Checkup - " + data.firstName + " " + data.lastName);
        const body = encodeURIComponent(buildEmailBody(data));

        // Update visible summary box so they can copy/paste if needed
        document.getElementById('statusArea').textContent = buildEmailBody(data);

        // Build mailto
        const mailtoLink =
            "mailto:jason.slaughter@pccsk12.com"
            + "?subject=" + subject
            + "&body=" + body;

        window.location.href = mailtoLink;
    }

    // ============
    // HOOK UP BUTTONS
    // ============
    document.getElementById('saveBtn').addEventListener('click', saveProgress);
    document.getElementById('loadBtn').addEventListener('click', loadProgress);
    document.getElementById('scoreBtn').addEventListener('click', gradeWork);
    document.getElementById('emailBtn').addEventListener('click', generateEmail);

    // OPTIONAL: auto-load on page open if data exists
    (function autoLoadOnStart(){
        try{
            const raw = localStorage.getItem(SAVE_KEY);
            if(raw){
                const data = JSON.parse(raw);
                setAllVals(data);
                showStatus("Autosynced saved work ✅ (Finish and email when ready.)");
            }
        }catch(err){
            // ignore
        }
    })();

})();
</script>

</body>
</html>
